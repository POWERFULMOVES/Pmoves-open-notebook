# PMOVES.AI CHIT Secrets Manifest Template
# Place at: chit/secrets_manifest_v2.yaml or .chit/secrets_manifest_v2.yaml

api_version: "2.0"
environment: ${CHIT_ENVIRONMENT:-production}

# Secrets sources in order of precedence (higher number = higher precedence)
sources:
  # 1. Environment variables (base precedence)
  - type: env
    precedence: 50

  # 2. CHIT Vault (highest precedence - overrides env vars)
  - type: chit_vault
    precedence: 100
    endpoint: ${CHIT_VAULT_ENDPOINT:-http://chit-vault:8050}

# Secrets required by this service
# Replace the example variables below with your service's actual secrets
variables:
  # === Service Identity ===
  - SERVICE_NAME
  - SERVICE_SLUG

  # === PMOVES.AI Core Services ===
  - NATS_URL

  # === LLM Gateway (if using TensorZero) ===
  # Uncomment if your service uses TensorZero
  # - TENSORZERO_URL
  # - TENSORZERO_API_KEY

  # === GPU Orchestrator (if applicable) ===
  # Uncomment for GPU services
  # - GPU_ORCHESTRATOR_URL

  # === Data Services (as applicable) ===
  # - QDRANT_URL
  # - QDRANT_API_KEY
  # - NEO4J_URL
  # - NEO4J_USERNAME
  # - NEO4J_PASSWORD
  # - MEILISEARCH_URL
  # - MEILISEARCH_API_KEY
  # - MINIO_ENDPOINT
  # - MINIO_ACCESS_KEY
  # - MINIO_SECRET_KEY

  # === Supabase (if applicable) ===
  # - SUPABASE_URL
  # - SUPABASE_ANON_KEY
  # - SUPABASE_SERVICE_KEY

  # === Service-Specific Secrets ===
  # Add your service's required secrets below
  # - EXAMPLE_API_KEY
  # - EXAMPLE_DATABASE_URL

# Optional: define secret groups for different environments
groups:
  development:
    required:
      - SERVICE_NAME
      - NATS_URL
    optional:
      - LOG_LEVEL

  production:
    required:
      - SERVICE_NAME
      - SERVICE_SLUG
      - NATS_URL
    optional:
      - LOG_LEVEL

# Validation rules
validation:
  strict: false  # Set to true to fail on missing optional secrets
  fail_on_missing_required: true
