# PMOVES.AI Tier-Based Environment Configuration
# Base Environment File (env.shared)
# This file contains common environment variables for all tiers
#
# Usage: Source this file first, then source your tier-specific file
#
# Place at: env.shared in your submodule root

# ============================================================================
# PMOVES.AI Environment Configuration
# ============================================================================

# Environment identifier
export PMOVES_ENV=${PMOVES_ENV:-production}
export TIER=${TIER:-api}

# Service identity (override in service-specific env files)
export SERVICE_NAME=${SERVICE_NAME:-your-service-name}
export SERVICE_SLUG=${SERVICE_SLUG:-your-service-slug}

# ============================================================================
# Service Discovery (NATS)
# ============================================================================

export NATS_URL=${NATS_URL:-nats://nats:4222}
export NATS_JETSTREAM=${NATS_JETSTREAM:-true}
export NATS_SUBJECT_PREFIX=${NATS_SUBJECT_PREFIX:-pmoves}

# ============================================================================
# LLM Gateway (TensorZero)
# ============================================================================

export TENSORZERO_URL=${TENSORZERO_URL:-http://tensorzero-gateway:3030}
export TENSORZERO_CLICKHOUSE_URL=${TENSORZERO_CLICKHOUSE_URL:-http://tensorzero-clickhouse:8123}

# ============================================================================
# GPU Orchestrator (if applicable)
# ============================================================================

export GPU_ORCHESTRATOR_URL=${GPU_ORCHESTRATOR_URL:-http://gpu-orchestrator:8050}

# ============================================================================
# Data Services
# ============================================================================

# Qdrant (Vector Database)
export QDRANT_URL=${QDRANT_URL:-http://qdrant:6333}
export QDRANT_API_KEY=${QDRANT_API_KEY:-}

# Neo4j (Graph Database)
export NEO4J_URL=${NEO4J_URL:-http://neo4j:7474}
export NEO4J_USERNAME=${NEO4J_USERNAME:-neo4j}
export NEO4J_PASSWORD=${NEO4J_PASSWORD:-neo4j}

# Meilisearch (Full-Text Search)
export MEILISEARCH_URL=${MEILISEARCH_URL:-http://meilisearch:7700}
export MEILISEARCH_API_KEY=${MEILISEARCH_API_KEY:-}

# MinIO (Object Storage)
export MINIO_ENDPOINT=${MINIO_ENDPOINT:-http://minio:9000}
export MINIO_ACCESS_KEY=${MINIO_ACCESS_KEY:-minioadmin}
export MINIO_SECRET_KEY=${MINIO_SECRET_KEY:-minioadmin}
export MINIO_REGION=${MINIO_REGION:-us-east-1}
export MINIO_USE_SSL=${MINIO_USE_SSL:-false}

# ============================================================================
# Supabase (PostgREST + Database)
# ============================================================================

export SUPABASE_URL=${SUPABASE_URL:-http://supabase_kong_PMOVES.AI:8000}
export SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY:-}
export SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY:-}
export SUPABASE_DB_URL=${SUPABASE_DB_URL:-postgresql://postgres:${POSTGRES_PASSWORD}@postgres:5432/postgres}

# ============================================================================
# Monitoring & Observability
# ============================================================================

export PROMETHEUS_URL=${PROMETHEUS_URL:-http://prometheus:9090}
export PROMETHEUS_PUSHGATEWAY=${PROMETHEUS_PUSHGATEWAY:-http://prometheus:9091}
export GRAFANA_URL=${GRAFANA_URL:-http://grafana:3000}
export LOKI_URL=${LOKI_URL:-http://loki:3100}

# Metrics configuration
export METRICS_ENABLED=${METRICS_ENABLED:-true}
export METRICS_PATH=${METRICS_PATH:-/metrics}
export METRICS_PORT=${METRICS_PORT:-9090}

# Logging
export LOG_LEVEL=${LOG_LEVEL:-INFO}
export LOG_FORMAT=${LOG_FORMAT:-json}

# ============================================================================
# Agent Zero (if applicable)
# ============================================================================

export AGENT_ZERO_URL=${AGENT_ZERO_URL:-http://agent-zero:8080}
export AGENT_ZERO_MCP_URL=${AGENT_ZERO_MCP_URL:-http://agent-zero:8080}
export AGENT_ZERO_MCP_PATH=${AGENT_ZERO_MCP_PATH:-/mcp/*}

# ============================================================================
# Hi-RAG Gateway (if applicable)
# ============================================================================

export HIRAG_V2_URL=${HIRAG_V2_URL:-http://hi-rag-gateway-v2:8086}
export HIRAG_V1_URL=${HIRAG_V1_URL:-http://hi-rag-gateway:8089}

# ============================================================================
# Archon (if applicable)
# ============================================================================

export ARCHON_URL=${ARCHON_URL:-http://archon:8091}

# ============================================================================
# Network Configuration
# ============================================================================

export HTTP_PROXY=${HTTP_PROXY:-}
export HTTPS_PROXY=${HTTPS_PROXY:-}
export NO_PROXY=${NO_PROXY:-localhost,127.0.0.1,.local,.internal}

# ============================================================================
# Security
# ============================================================================

export CHIT_ENVIRONMENT=${CHIT_ENVIRONMENT:-${PMOVES_ENV}}
export CHIT_VAULT_ENDPOINT=${CHIT_VAULT_ENDPOINT:-http://chit-vault:8050}

# ============================================================================
# Timeouts & Limits
# ============================================================================

export DEFAULT_TIMEOUT=${DEFAULT_TIMEOUT:-30}
export REQUEST_TIMEOUT=${REQUEST_TIMEOUT:-60}
export CONNECT_TIMEOUT=${CONNECT_TIMEOUT:-10}
export MAX_RETRIES=${MAX_RETRIES:-3}

# ============================================================================
# Health Check Configuration
# ============================================================================

export HEALTH_CHECK_INTERVAL=${HEALTH_CHECK_INTERVAL:-30}
export HEALTH_CHECK_TIMEOUT=${HEALTH_CHECK_TIMEOUT:-5}
export HEALTH_CHECK_PATH=${HEALTH_CHECK_PATH:-/healthz}
